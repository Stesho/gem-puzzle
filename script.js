!function(){"use strict";(()=>{document.querySelector("body").innerHTML='<div class="wrapper"> <div class="container"> <header class="header"> <h1 class="title">Gem puzzle</h1> </header> <main class="main"> <div class="panel"> <button class="panel__start">suffle and start</button> <button class="panel__start">save</button> <button class="panel__start">result</button> </div> <div class="canvas-wrapper"> <div class="canvas"> </div> </div> </main> </div> </div>';const t=new class{constructor(t){this.cellCount=t,this.cellArr=this.shuffle(),this.emptyIndex=[]}draw(){const t=Math.sqrt(this.cellCount),l=document.querySelector(".canvas"),e=getComputedStyle(l).padding.split("px")[0];let s=(l.clientWidth-(t+1)*e)/t;s+="px";for(let e=0;e<t;e+=1)for(let n=0;n<t;n+=1){const t=document.createElement("div");t.classList.add("canvas__cell"),t.style.width=s,t.style.height=s,t.textContent=this.cellArr[e][n],l.append(t)}this.render()}render(){Math.sqrt(this.cellCount);const t=document.querySelectorAll(".canvas__cell");for(let l=0;l<this.cellCount;l+=1){const[e,s]=this.getRowCol(l);t[l].classList.contains("canvas__emptyCell")&&t[l].classList.remove("canvas__emptyCell"),null===this.cellArr[e][s]&&t[l].classList.add("canvas__emptyCell")}}shuffle(){const t=this.cellCount,l=Math.sqrt(this.cellCount),e=[],s=[];for(let l=0;l<t-1;l+=1)e[l]=l+1;e.push(null);for(let t=e.length-1;t>0;t-=1){const l=Math.floor(Math.random()*(t+1));[e[t],e[l]]=[e[l],e[t]]}for(let t=0;t<l;t+=1)s[t]=[];let n=0;for(let t=0;t<l;t+=1)for(let r=0;r<l;r+=1)s[t][r]=e[n],n+=1;return s}moveCell(t){const[l,e]=this.getRowCol(t),[s,n]=this.emptyIndex;this.isClickable(t)&&([this.cellArr[l][e],this.cellArr[s][n]]=[this.cellArr[s][n],this.cellArr[l][e]],this.render())}isClickable(t){const l=Math.sqrt(this.cellCount),[e,s]=this.getRowCol(t);return e<l-1&&null===this.cellArr[e+1][s]||e>0&&null===this.cellArr[e-1][s]||null===this.cellArr[e][s+1]||null===this.cellArr[e][s-1]}getRowCol(t){const l=Math.sqrt(this.cellCount);return[Math.trunc(t/l),t%l]}}(9);t.draw();const l=document.querySelectorAll(".canvas__cell");for(let e=0;e<l.length;e+=1)l[e].addEventListener("click",(()=>{t.moveCell(e)}))})()}();